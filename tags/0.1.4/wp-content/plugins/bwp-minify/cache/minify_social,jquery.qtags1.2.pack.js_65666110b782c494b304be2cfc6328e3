var $window=null;function reloadSocialHTML(saved){if(!$window.hasClass('comments')){window.location.reload();}
else{if(saved=='false'){alert('Failed to authorize this account. Please try again.')}
else{var $parent=jQuery('.social-post');jQuery.get($parent.find('#reload_url').val(),{},function(response){if(response.result=='success'){jQuery('body').addClass('logged-in');$parent.html(response.html);jQuery('#primary').find('#social_login').parent().html(response.disconnect_url);}},'json');}}}
(function($){var c=document.getElementsByTagName('html')[0];c.className+=' social-js';$(function(){$('.social-login').click(function(e){e.preventDefault();$window=$(this);window.open($(this).attr('href'),"ServiceAssociate",'width=700,height=400');});$('.social_deauth').click(function(e){e.preventDefault();var $this=$(this);$.get($this.attr('href'),{},function(){$this.parent().parent().fadeOut();});});if($('#social').length){$('.social-nav a').click(function(e){e.preventDefault();$('#cancel-comment-reply-link').trigger('click');$('.social-current-tab').removeClass('social-current-tab');$(this).parent().addClass('social-current-tab');var className=$(this).attr('rel');if(className=='social-all'){$('.social-commentlist li').removeClass('social-comment-collapse');}else{$('.social-commentlist li').each(function(){if(!$(this).hasClass(className)){$(this).addClass('social-comment-collapse');}
else{$(this).removeClass('social-comment-collapse');}});}});function insertTwitterUsername($author,$textarea,extraContent){var username=$author.html()+' ';if(username.substr(0,1)!='@'){username='@'+username;}
if(extraContent!==undefined){username+=extraContent;}
var pos=username.length;$textarea.val(username);if($textarea.get(0).setSelectionRange){$textarea.focus();$textarea.get(0).setSelectionRange(pos,pos);}else if($textarea.createTextRange){var range=$textarea.get(0).createTextRange();range.collapse(true);range.moveEnd('character',pos);range.moveStart('character',pos);range.select();}
var author_rel=$author.attr('rel').split(' ');$('#in_reply_to_status_id').val(author_rel[0]);}
var $use_twitter_reply=$('#use_twitter_reply');$('.comment-reply-link').click(function(){$('.comment-reply-link').show();$(this).hide();var $parent=$(this).closest('li');var $textarea=$parent.find('textarea');if($parent.hasClass('social-twitter')&&$use_twitter_reply.val()=='1'){var $author=$parent.find('.social-comment-author a');insertTwitterUsername($respond.closest('li').find('.social-comment-author a'),$textarea);}});$('#cancel-comment-reply-link').click(function(){$('.comment-reply-link').show();});var $avatar=$('#social #respond .avatar:first');var original_avatar=$avatar.attr('src');$('#post_accounts').live('change',function(){$(this).find('option:selected').each(function(){var avatar=$(this).attr('rel');if(avatar!==undefined){$avatar.attr('src',avatar);}else{$avatar.attr('src',original_avatar);}
var label=$(this).parent().attr('label');if(label!==undefined){$('#post_to').show().find('span').html(label);if(label==='Twitter'){var $respond=$('#respond');var $textarea=$respond.find('textarea');if($respond.parent().hasClass('social-twitter')){var content=$textarea.val();if(!content.length||content.substring(0,1)!='@'){insertTwitterUsername($respond.closest('li').find('.social-comment-author a'),$textarea,content);}}
$use_twitter_reply.val('1');}else{$use_twitter_reply.val('0');}}else{$('#post_to').hide();}});});$('#post_accounts').trigger('change');}});})(jQuery);
;(function($){$.qtag={baseURL:null,i18n:{'default':{'strong':'Stichwort','em':'Betont','s':'Gel\u00F6scht','quote':'Zitat','url':'Link','code':'Code',}}};$.fn.extend({qtag:function(e){this.defaults={highlight:true,enableToolbar:true,lang:'default',tags:'strong,em,s,url,code,quote',};var e=$.extend(this.defaults,e);var f=e.tags.split(/,\s*/);if($.qtag.baseURL==null){var g=$("script");for(var i=0;i<g.length;i++){if(g.eq(i).attr("src").indexOf('jquery.qtag')>-1){$.qtag.baseURL=g.eq(i).attr("src").replace(/[^\/\\]+$/,'');break}}}var h='<div class="qtag-toolbar">';for(var i in f){h+='<span class="qtag-'+f[i]+'" title="'+$.qtag.i18n[e.lang][f[i]]+'">'+$.qtag.i18n[e.lang][f[i]]+'</span> '}h+='</div>';return this.each(function(){var c=e;c.range=null;c.ta=this;$(this).bind("select click keyup",function(){if(document.selection){c.range=document.selection.createRange()}});if(e.enableToolbar){var d=$(h);$(this).before(d);if($.browser.msie&&parseInt($.browser.version)<=6){d.children("span").mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")})}d.find(".qtag-strong").click(function(){insertTag(c,'<strong>','</strong>')});d.find(".qtag-em").click(function(){insertTag(c,'<em>','</em>')});d.find(".qtag-u").click(function(){insertTag(c,'<u>','</u>')});d.find(".qtag-s").click(function(){insertTag(c,'<s>','</s>')});d.find(".qtag-code").click(function(){insertTag(c,'<code>','</code>')});d.find(".qtag-quote").click(function(){insertTag(c,'<blockquote>','</blockquote>')});d.find(".qtag-url").click(function(){insertTag(c,function(a){var b=prompt('URL: ','');if(b!=null&&b!=''){if(a==''){return'<a href="'+b+'">'+b+'</a>'}else{return'<a href="'+b+'" title="'+a+'">'+a+'</a>'}return false}})})}})}});function insertTag(a,b,c){var d,startPos,endPos;var e=a.ta;var f=a.range;var g='';if(f!=null){g=f.text}else if(typeof e.selectionStart!='undefined'){startPos=e.selectionStart;endPos=e.selectionEnd;g=e.value.substring(startPos,endPos)}if(typeof b=='function'||typeof b=='object'){d=b(g);if(d===false){if(f!=null){f.moveStart('character',g.length);f.select()}else if(typeof e.selectionStart!='undefined'){e.selectionStart=startPos+g.length}e.focus();return}}else{if(!c||c==''){d=g+b}else{d=b+g+c}}if(f!=null){f.text=d;if(a.highlight){f.moveStart('character',-d.length)}else{f.moveStart('character',0)}f.select()}else if(typeof e.selectionStart!='undefined'){e.value=e.value.substring(0,startPos)+d+e.value.substr(endPos);if(a.highlight){e.selectionStart=startPos;e.selectionEnd=startPos+d.length}else{e.selectionStart=startPos+d.length;e.selectionEnd=startPos+d.length}}else{e.value+=d}e.focus()}})(jQuery);$(document).ready(function(){$("#comment").qtag()});